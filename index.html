<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>E-Santri Pro</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.3/dist/tailwind.min.css" rel="stylesheet">
<style>
  /* Nuansa Islami dan modern */
  body { font-family: 'Inter', sans-serif; background-color: #f3f6f4; color: #1a202c; }
  .sidebar { background-color: #2f855a; min-height: 100vh; color: #fff; }
  .sidebar a { display: block; padding: 0.75rem 1rem; margin: 0.25rem 0; border-radius: 0.5rem; transition: 0.2s; }
  .sidebar a:hover { background-color: #276749; }
  .header { background-color: #68d391; color: #1a202c; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem; }
  .table th { background-color: #68d391; color: #1a202c; }
  .btn { background-color: #38a169; color: #fff; padding: 0.5rem 1rem; border-radius: 0.5rem; transition: 0.2s; }
  .btn:hover { background-color: #2f855a; }
  @media (max-width:768px){
    .sidebar { position: fixed; left: -100%; top: 0; width: 70%; z-index: 50; transition: 0.3s; }
    .sidebar.open { left: 0; }
  }
</style>
</head>
<body class="flex flex-col md:flex-row">

<!-- SIDEBAR -->
<div class="sidebar p-4 md:w-64" id="sidebar">
  <h2 class="text-xl font-bold mb-4">E-Santri Pro</h2>
  <a href="#dashboard">Dashboard</a>
  <a href="#santri">Santri</a>
  <a href="#alumni">Alumni</a>
  <a href="#keuangan">Keuangan</a>
  <a href="#pelanggaran">Pelanggaran</a>
  <a href="#perizinan">Perizinan</a>
  <a href="#userManagement">User Management</a>
</div>

<!-- MAIN CONTENT -->
<div class="flex-1 p-4 md:ml-64">

  <!-- HEADER -->
  <div class="flex justify-between items-center mb-4">
    <h1 class="text-2xl font-bold">Dashboard</h1>
    <button class="md:hidden btn" onclick="toggleSidebar()">Menu</button>
  </div>

  <!-- DASHBOARD -->
  <div id="dashboard" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
    <div class="header">
      <h3 class="font-bold">Santri Berdasarkan Gender</h3>
      <p id="chartGender">Laki-laki: 0 | Perempuan: 0 | Total: 0</p>
    </div>
    <div class="header">
      <h3 class="font-bold">Total Santri</h3>
      <p id="totalSantri">0</p>
    </div>
    <div class="header">
      <h3 class="font-bold">Total Alumni</h3>
      <p id="totalAlumni">0</p>
    </div>
  </div>

  <!-- SANTRI -->
  <section id="santri" class="mb-6">
    <h2 class="text-xl font-bold mb-2">Data Santri</h2>
    <div class="overflow-x-auto">
      <table class="table-auto w-full border-collapse border border-gray-300">
        <thead>
          <tr>
            <th><input type="checkbox" id="checkAll"></th>
            <th>Nama</th>
            <th>Gender</th>
            <th>Asrama</th>
            <th>Kelas</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="santriTableBody"></tbody>
      </table>
    </div>
    <div class="mt-2 flex gap-2 flex-wrap">
      <button class="btn" onclick="bulkAction('NaikKelas')">Naik Kelas</button>
      <button class="btn" onclick="bulkAction('Bertugas')">Bertugas</button>
      <button class="btn" onclick="bulkAction('Khidmah')">Khidmah</button>
      <button class="btn" onclick="bulkAction('Alumni')">Alumni</button>
      <button class="btn" onclick="bulkAction('Export')">Export Filter</button>
    </div>
  </section>

  <!-- ALUMNI -->
  <section id="alumni" class="mb-6">
    <h2 class="text-xl font-bold mb-2">Data Alumni</h2>
    <div class="overflow-x-auto">
      <table class="table-auto w-full border-collapse border border-gray-300">
        <thead>
          <tr>
            <th>Nama</th>
            <th>Gender</th>
            <th>Asrama</th>
            <th>Kelas</th>
            <th>Tanggal Alumni</th>
          </tr>
        </thead>
        <tbody id="alumniTableBody"></tbody>
      </table>
    </div>
    <button class="btn mt-2" onclick="exportSantri(alumniSheet.map(a=>a.id))">Download Alumni</button>
  </section>

  <!-- USER MANAGEMENT (Admin Only) -->
  <section id="userManagement" class="mb-6">
    <h2 class="text-xl font-bold mb-2">User Management</h2>
    <div class="overflow-x-auto">
      <table class="table-auto w-full border-collapse border border-gray-300">
        <thead>
          <tr>
            <th>Username</th>
            <th>Role</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="userTableBody"></tbody>
      </table>
    </div>
  </section>

  <!-- KEUANGAN -->
  <section id="keuangan" class="mb-6">
    <h2 class="text-xl font-bold mb-2">Keuangan</h2>
    <div class="overflow-x-auto">
      <table class="table-auto w-full border-collapse border border-gray-300">
        <thead>
          <tr>
            <th>Tanggal</th>
            <th>Jenis</th>
            <th>Kategori</th>
            <th>Jumlah</th>
            <th>Keterangan</th>
            <th>Input By</th>
          </tr>
        </thead>
        <tbody id="keuanganTableBody"></tbody>
      </table>
    </div>
  </section>

  <!-- PELANGGARAN -->
  <section id="pelanggaran" class="mb-6">
    <h2 class="text-xl font-bold mb-2">Pelanggaran</h2>
    <div class="overflow-x-auto">
      <table class="table-auto w-full border-collapse border border-gray-300">
        <thead>
          <tr>
            <th>Tanggal</th>
            <th>Nama</th>
            <th>Pelanggaran</th>
            <th>Status</th>
            <th>Input By</th>
          </tr>
        </thead>
        <tbody id="pelanggaranTableBody"></tbody>
      </table>
    </div>
  </section>

</div>

<script src="app.js"></script>
<script>
function toggleSidebar(){
  document.getElementById('sidebar').classList.toggle('open');
}

// Check/uncheck all santri
document.getElementById('checkAll')?.addEventListener('change', function(){
  const checked = this.checked;
  document.querySelectorAll('.santriCheckbox').forEach(cb=>cb.checked=checked);
});
</script>
</body>
</html>
